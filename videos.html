<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PIXELFILTER | Videos</title>
  <link rel="icon" type="image/webp" href="assets/images/Favicon.webp">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/components/header.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
  <header class="pf-header">
    <div class="container">
      <div class="pf-header__logo">
        <a href="/"><img src="assets/images/PixelFilter_Logo.webp" alt="PixelFilter Logo" height="40"></a>
      </div>
      <nav class="pf-header__nav">
        <a href="videos.html" class="active">Videos</a>
        <a href="mixes.html">Mixes</a>
        <a href="photos.html">Photos</a>
        <a href="shows.html">Shows</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>
  <div class="container">
    <main>
    </main>
  </div>
  <div class="video-header-embed">
    <iframe
      width="100%"
      height="400"
      src="https://www.youtube.com/embed/wip3zTqO5p8?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&loop=1&playlist=wip3zTqO5p8&modestbranding=1&fs=0&disablekb=1&iv_load_policy=3&rel=0&start=600&mute=1"
      title="YouTube video player"
      frameborder="0"
      allow="autoplay; encrypted-media"
      allowfullscreen
      style="display:block; width:100%; height:700px; object-fit:cover; pointer-events:none;">
    </iframe>
  </div>
  <div class="container">
    <main>
      <div id="videos-filter" class="videos-filter" style="margin-bottom:24px; display:flex; align-items:center; gap:0;">
        <span class="filter-label active" data-genre="All">All</span>
        <span class="filter-sep">|</span>
        <span class="filter-label" data-genre="Techno">Techno</span>
        <span class="filter-sep">|</span>
        <span class="filter-label" data-genre="House">House</span>
      </div>
      <div id="videos-grid" class="videos-grid"></div>
      <script>
      fetch('data/videos.json')
      .then(res => res.json())
      .then(videos => {
        const grid = document.getElementById('videos-grid');
        const filterBar = document.getElementById('videos-filter');
        let currentGenre = "All";

        function renderGrid(genre) {
          let filtered = genre === "All" ? videos : videos.filter(v => v.Genre === genre);
          grid.innerHTML = filtered.map((video, idx) => {
            const match = video.VideoURL.match(/v=([a-zA-Z0-9_-]+)/);
            const id = match ? match[1] : '';
            const thumb = id ? `https://img.youtube.com/vi/${id}/hqdefault.jpg` : '';
            return `
              <div class="video-item" data-video-id="${id}" data-title="${video.Title}" style="cursor:pointer;">
                <img src="${thumb}" alt="Thumbnail for ${video.Title}" class="video-thumb"/>
                <div class="video-info">
                  <h2 class="video-title">${video.Title}</h2>
                  <p class="video-desc">${video.Description}</p>
                </div>
              </div>
            `;
          }).join('');

          // Add click event for fullscreen overlay
          grid.querySelectorAll('.video-item').forEach(item => {
            item.addEventListener('click', function() {
              const videoId = item.getAttribute('data-video-id');
              if (!videoId) return;
              const overlay = document.createElement('div');
              overlay.style.position = 'fixed';
              overlay.style.top = '0';
              overlay.style.left = '0';
              overlay.style.width = '100vw';
              overlay.style.height = '100vh';
              overlay.style.background = 'rgba(0,0,0,0.95)';
              overlay.style.zIndex = '9999';
              overlay.style.display = 'flex';
              overlay.style.alignItems = 'center';
              overlay.style.justifyContent = 'center';

              const closeBtn = document.createElement('button');
              closeBtn.textContent = '×';
              closeBtn.style.position = 'absolute';
              closeBtn.style.top = '32px';
              closeBtn.style.right = '48px';
              closeBtn.style.fontSize = '3rem';
              closeBtn.style.color = '#fff';
              closeBtn.style.background = 'transparent';
              closeBtn.style.border = 'none';
              closeBtn.style.cursor = 'pointer';
              closeBtn.style.zIndex = '10001';

              const iframe = document.createElement('iframe');
              iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&showinfo=0&modestbranding=1`;
              iframe.width = '90%';
              iframe.height = '90%';
              iframe.allow = 'autoplay; encrypted-media';
              iframe.allowFullscreen = true;
              iframe.frameBorder = '0';
              iframe.style.borderRadius = '12px';
              iframe.style.boxShadow = '0 0 32px #000';

              overlay.appendChild(iframe);
              overlay.appendChild(closeBtn);
              document.body.appendChild(overlay);

              if (overlay.requestFullscreen) {
                overlay.requestFullscreen();
              } else if (overlay.webkitRequestFullscreen) {
                overlay.webkitRequestFullscreen();
              } else if (overlay.msRequestFullscreen) {
                overlay.msRequestFullscreen();
              }

              closeBtn.onclick = () => {
                document.body.removeChild(overlay);
                if (document.fullscreenElement) {
                  document.exitFullscreen();
                }
              };

              document.addEventListener('fullscreenchange', function handler() {
                if (!document.fullscreenElement && document.body.contains(overlay)) {
                  document.body.removeChild(overlay);
                  document.removeEventListener('fullscreenchange', handler);
                }
              });
            });
          });
        }

        // Initial render
        renderGrid(currentGenre);

        // Filter button logic
        filterBar.querySelectorAll('.filter-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            filterBar.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentGenre = btn.getAttribute('data-genre');
            renderGrid(currentGenre);
          });
        });
      });
      </script>
      <style>
        .filter-label {
          cursor: pointer;
          padding: 4px 16px;
          font-size: 1.1rem;
          color: #888;
          border-radius: 16px;
          transition: color 0.2s;
          user-select: none;
        }
        .filter-label.active {
          color: #fff;
        }
        .filter-sep {
          color: #888;
          font-size: 1.1rem;
          margin: 0 4px;
          user-select: none;
        }
      </style>
      <script>
        // Update filter logic for spans
        document.addEventListener('DOMContentLoaded', function() {
          const filterBar = document.getElementById('videos-filter');
          if (!filterBar) return;
          filterBar.querySelectorAll('.filter-label').forEach(label => {
            label.addEventListener('click', function() {
              filterBar.querySelectorAll('.filter-label').forEach(l => l.classList.remove('active'));
              label.classList.add('active');
              const genre = label.getAttribute('data-genre');
              // Re-render grid using the same logic as before
              fetch('data/videos.json')
                .then(res => res.json())
                .then(videos => {
                  let filtered = genre === "All" ? videos : videos.filter(v => v.Genre === genre);
                  const grid = document.getElementById('videos-grid');
                  grid.innerHTML = filtered.map((video, idx) => {
                    const match = video.VideoURL.match(/v=([a-zA-Z0-9_-]+)/);
                    const id = match ? match[1] : '';
                    const thumb = id ? `https://img.youtube.com/vi/${id}/hqdefault.jpg` : '';
                    return `
                      <div class="video-item" data-video-id="${id}" data-title="${video.Title}" style="cursor:pointer;">
                        <img src="${thumb}" alt="Thumbnail for ${video.Title}" class="video-thumb"/>
                        <div class="video-info">
                          <h2 class="video-title">${video.Title}</h2>
                          <p class="video-desc">${video.Description}</p>
                        </div>
                      </div>
                    `;
                  }).join('');
                  grid.querySelectorAll('.video-item').forEach(item => {
                    item.addEventListener('click', function() {
                      const videoId = item.getAttribute('data-video-id');
                      if (!videoId) return;
                      const overlay = document.createElement('div');
                      overlay.style.position = 'fixed';
                      overlay.style.top = '0';
                      overlay.style.left = '0';
                      overlay.style.width = '100vw';
                      overlay.style.height = '100vh';
                      overlay.style.background = 'rgba(0,0,0,0.95)';
                      overlay.style.zIndex = '9999';
                      overlay.style.display = 'flex';
                      overlay.style.alignItems = 'center';
                      overlay.style.justifyContent = 'center';

                      const closeBtn = document.createElement('button');
                      closeBtn.textContent = '×';
                      closeBtn.style.position = 'absolute';
                      closeBtn.style.top = '32px';
                      closeBtn.style.right = '48px';
                      closeBtn.style.fontSize = '3rem';
                      closeBtn.style.color = '#fff';
                      closeBtn.style.background = 'transparent';
                      closeBtn.style.border = 'none';
                      closeBtn.style.cursor = 'pointer';
                      closeBtn.style.zIndex = '10001';

                      const iframe = document.createElement('iframe');
                      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&showinfo=0&modestbranding=1`;
                      iframe.width = '90%';
                      iframe.height = '90%';
                      iframe.allow = 'autoplay; encrypted-media';
                      iframe.allowFullscreen = true;
                      iframe.frameBorder = '0';
                      iframe.style.borderRadius = '12px';
                      iframe.style.boxShadow = '0 0 32px #000';

                      overlay.appendChild(iframe);
                      overlay.appendChild(closeBtn);
                      document.body.appendChild(overlay);

                      if (overlay.requestFullscreen) {
                        overlay.requestFullscreen();
                      } else if (overlay.webkitRequestFullscreen) {
                        overlay.webkitRequestFullscreen();
                      } else if (overlay.msRequestFullscreen) {
                        overlay.msRequestFullscreen();
                      }

                      closeBtn.onclick = () => {
                        document.body.removeChild(overlay);
                        if (document.fullscreenElement) {
                          document.exitFullscreen();
                        }
                      };

                      document.addEventListener('fullscreenchange', function handler() {
                        if (!document.fullscreenElement && document.body.contains(overlay)) {
                          document.body.removeChild(overlay);
                          document.removeEventListener('fullscreenchange', handler);
                        }
                      });
                    });
                  });
                });
            });
          });
        });
      </script>
    </main>
  </div>
  <footer id="site-footer"></footer>
</body>
<style>
.video-header-embed {
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  background: #000;
  margin-bottom: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  height: 700px;
  z-index: 10;
}
.video-header-embed iframe {
  width: 120vw;
  min-width: 100vw;
  max-width: none;
  height: 900px;
  border: none;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
}
@media (max-width: 600px) {
  .video-header-embed {
    height: 340px;
  }
  .video-header-embed iframe {
    height: 340px;
    top: 0;
  }
}
</style>
</html>
<script src="js/header-scroll.js"></script>
<script src="js/footer.js"></script>